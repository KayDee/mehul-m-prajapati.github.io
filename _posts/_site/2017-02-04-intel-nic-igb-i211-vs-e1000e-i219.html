<h2 id="which-network-interface-is-better">Which Network Interface is Better?</h2>

<p>My new <a href="http://www.asrock.com/MB/Intel/Z270%20Taichi/">ASRock Z270 Taichi</a> comes with two network interface cards that Linux identifies as:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ lspci -nnk | grep -A2 Ethernet

00:1f.6 Ethernet controller [0200]: Intel Corporation Ethernet Connection (2) I219-V [8086:15b8]
		Subsystem: ASRock Incorporation Device [1849:15b8]
		Kernel driver in use: e1000e
--
07:00.0 Ethernet controller [0200]: Intel Corporation I211 Gigabit Network Connection [8086:1539] (rev 03)
		Subsystem: ASRock Incorporation Device [1849:1539]
		Kernel driver in use: igb
</code></pre>
</div>

<p>Since I only need one the question was raised: Which should I use?  I’m sure the hardware performance is comparable but what driver is less drama?</p>

<p>A quick Google search for “igb vs e1000e” yielded no results other then a few others asking the same question with no answer.</p>

<h2 id="dig-into-the-hardware-datasheet">Dig into the Hardware Datasheet</h2>

<p>The <code class="highlighter-rouge">I219</code> (<code class="highlighter-rouge">8086:15b8</code>) is clearly the network interface MAC integrated into my Z270 PCH as it has the same PCI address as all the other PCH peripherals.  The <code class="highlighter-rouge">I211</code> appears to be a dedicated discrete chip.</p>

<p><a href="http://ark.intel.com/compare/82186,64404">Intel ARK comparison</a> yields nothing of interest either.</p>

<p>The Intel datasheets for the <a href="http://www.intel.com/content/www/us/en/embedded/products/networking/i211-ethernet-controller-datasheet.html">I211</a> and <a href="http://www.intel.com/content/www/us/en/embedded/products/networking/ethernet-connection-i219-datasheet.html">I219</a> start to give us some real perspective though.</p>

<p>From the datasheet the <code class="highlighter-rouge">I211</code> seems to be much more featured (or at least is better documented and has a longer datasheet).</p>

<p>Details from the datasheet worth noting:</p>

<ul>
  <li><strong>Receive Side Scaling (RSS)</strong> support on both up to two RSS queues per TX and RX (didn’t check if each driver supports them).  Interestingly, the <code class="highlighter-rouge">I210</code> supports up to four RSS queues and may result in better performance at very high load.</li>
  <li><strong>Jumbo Frames</strong> up to <em>9KB</em> on <code class="highlighter-rouge">I219</code> and up to 9.5kB on the <code class="highlighter-rouge">I211</code>.</li>
  <li><strong>Low power</strong> features on the <code class="highlighter-rouge">I219</code> claims to consume less then 1 mW with Ethernet cable disconnected (perfect for not using it).</li>
  <li>Receive Side Coalescing (RSC) not available on either.</li>
  <li><strong>Direct Cache Access (DCA)</strong> is available on the <code class="highlighter-rouge">I211</code>.</li>
  <li><strong>CPU Offloading</strong> features supported by the <code class="highlighter-rouge">I211</code> include TCP segmentation and various checksums.  The <code class="highlighter-rouge">I219</code> only advertises ARP offloading support.</li>
  <li>Virtualization features like VMDq are not supported.</li>
  <li><strong>VLANs</strong> are supported.</li>
</ul>

<h2 id="dig-into-the-linux-kernel-driver">Dig into the Linux Kernel Driver</h2>

<p>A quick glance over the <code class="highlighter-rouge">Kconfig</code> of Linux 4.10 shows that the <code class="highlighter-rouge">igb</code> driver has many more options like HWMON (if supported by hardware, doesn’t appear on my <code class="highlighter-rouge">I211</code>) and DCA.  That’s good.  The E1000E driver doesn’t have any bells or whistles to flip on or off, but they could be supported.</p>

<p>Stability? No clue, I’ve used the <code class="highlighter-rouge">e1000e</code> driver before on an add-in-card (<code class="highlighter-rouge">EXPI9301CT</code>, <code class="highlighter-rouge">8086:10d3</code>) and never had any issues, but that’s par for the course these days in Linux and the cheap <code class="highlighter-rouge">r8619</code> are practically as solid.</p>

<h2 id="conclusion-pick-the-i211">Conclusion: Pick the I211</h2>

<p>The <code class="highlighter-rouge">I211</code> with the <code class="highlighter-rouge">igb</code> driver is the clear winner.  It worked out of the box on Arch Linux on kernel 4.9.6.  The hardware supports a few more minor bells and whistles to improve performance while lowering CPU load and the support from the kernel driver leverage these features.  The <code class="highlighter-rouge">I219</code> is built into the Z270 chipset and has less features but uses less power.</p>

<p>Use the <code class="highlighter-rouge">I211</code>.  If you need another lower bandwidth NIC, perhaps as a router, put the <code class="highlighter-rouge">I219</code> on the slower link like the upstream Internet connection.</p>

<p>Plug in the cables and call it a day, but I bet if you mix-up the cables, you’ll never notice and both will work great anyways.</p>

<p>Anyone have issues with either interface or driver?  Leave notes in the comments below.</p>
